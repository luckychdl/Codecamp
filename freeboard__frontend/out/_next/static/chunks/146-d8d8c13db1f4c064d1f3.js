(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[146],{12750:function(n,e,t){"use strict";function r(n){var e=new Date(n).getFullYear(),t=String(new Date(n).getMonth()+1).padStart(2,"0"),r=new Date(n).getDate();return"".concat(e,"-").concat(t,"-").concat(r)}t.d(e,{_:function(){return r}})},67146:function(n,e,t){"use strict";t.d(e,{Z:function(){return _e}});var r=t(85893),i=t(59999),o=t(46829),s=t(11163),u=t(67294),a=t(42283),c=t(12750),l=t(34490),d=t(27261),p=t(24524);function f(){var n=(0,d.Z)(["\n  display: flex;\n  flex-direction: column;\n  align-items: flex-end;\n  justify-content: flex-end;\n  position: sticky;\n  bottom: 0px;\n"]);return f=function(){return n},n}function h(){var n=(0,d.Z)(["\n  width: 40px;\n  height: 40px;\n  cursor: pointer;\n  z-index: 9999;\n  margin: 50px;\n"]);return h=function(){return n},n}var x=p.Z.img(h()),v=p.Z.div(f()),g=function(){return(0,r.jsx)(v,{children:(0,r.jsx)(x,{onClick:function(){window.scrollTo(0,0)},src:"/FreeBoard/topArrow.svg"})})};function m(){var n=(0,d.Z)(["\n  display: flex;\n  width: 50px;\n  justify-content: flex-end;\n  align-items: flex-end;\n  /* position: fixed; */\n"]);return m=function(){return n},n}function b(){var n=(0,d.Z)([""]);return b=function(){return n},n}function Z(){var n=(0,d.Z)([""]);return Z=function(){return n},n}function w(){var n=(0,d.Z)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  height: 120px;\n"]);return w=function(){return n},n}function y(){var n=(0,d.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  cursor: pointer;\n  width: 1050px;\n  padding-top: 10px;\n  /* border-top: 1px solid #bdbdbd; */\n  border-bottom: 1px solid #bdbdbd;\n  :hover {\n    background-color: #ede7f6;\n\n    box-shadow: inset 2px 2px 2px 0px rgba(255, 255, 255, 0.5),\n      7px 7px 20px 0px rgba(0, 0, 0, 0.1), 4px 4px 5px 0px rgba(0, 0, 0, 0.1);\n    transition: all 0.3s ease;\n  }\n\n  :active {\n    position: relative;\n    top: 2px;\n  }\n"]);return y=function(){return n},n}function j(){var n=(0,d.Z)(["\n  font-weight: bold;\n  font-size: 24px;\n"]);return j=function(){return n},n}function k(){var n=(0,d.Z)(["\n  width: 20px;\n  height: 20px;\n  margin-right: 10px;\n"]);return k=function(){return n},n}function S(){var n=(0,d.Z)(["\n  display: flex;\n  align-items: center;\n  width: 150px;\n"]);return S=function(){return n},n}function L(){var n=(0,d.Z)([""]);return L=function(){return n},n}function C(){var n=(0,d.Z)(["\n  font-size: 18px;\n"]);return C=function(){return n},n}function M(){var n=(0,d.Z)(["\n  width: 20px;\n  height: 20px;\n  margin-right: 5px;\n"]);return M=function(){return n},n}function P(){var n=(0,d.Z)(["\n  margin-right: 20px;\n"]);return P=function(){return n},n}function _(){var n=(0,d.Z)(["\n  display: flex;\n  align-items: center;\n"]);return _=function(){return n},n}function O(){var n=(0,d.Z)([""]);return O=function(){return n},n}function E(){var n=(0,d.Z)(["\n  font-size: 16px;\n"]);return E=function(){return n},n}function z(){var n=(0,d.Z)(["\n  font-weight: 500;\n  font-size: 24px;\n  margin-bottom: 5px;\n"]);return z=function(){return n},n}function T(){var n=(0,d.Z)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n"]);return T=function(){return n},n}function R(){var n=(0,d.Z)(["\n  width: 160px;\n  height: 160px;\n  margin-right: 40px;\n  margin-left: 10px;\n"]);return R=function(){return n},n}function U(){var n=(0,d.Z)(["\n  width: 950px;\n  display: flex;\n  margin-bottom: 10px;\n"]);return U=function(){return n},n}function D(){var n=(0,d.Z)(["\n  display: flex;\n  width: 950px;\n  justify-content: flex-end;\n  align-items: center;\n"]);return D=function(){return n},n}function N(){var n=(0,d.Z)(["\n  margin-right: 10px;\n  width: 78px;\n  height: 52px;\n  background-color: #512771;\n  color: white;\n  border: none;\n  border-radius: 7px;\n"]);return N=function(){return n},n}function W(){var n=(0,d.Z)(["\n  margin-right: 10px;\n"]);return W=function(){return n},n}function I(){var n=(0,d.Z)(["\n  margin-right: 10px;\n  width: 282px;\n  height: 52px;\n  outline-color: #512771;\n"]);return I=function(){return n},n}function B(){var n=(0,d.Z)(["\n  margin: 10px;\n"]);return B=function(){return n},n}function F(){var n=(0,d.Z)(["\n  display: flex;\n  width: 1050px;\n  justify-content: flex-start;\n"]);return F=function(){return n},n}function H(){var n=(0,d.Z)(["\n  display: flex;\n  width: 1050px;\n  justify-content: flex-start;\n  margin-bottom: 50px;\n"]);return H=function(){return n},n}function q(){var n=(0,d.Z)(["\n  width: 1050px;\n  border-bottom: 1px solid #bdbdbd;\n"]);return q=function(){return n},n}function A(){var n=(0,d.Z)(["\n  width: 250px;\n  margin: 20px 20px 80px 20px;\n  height: 330px;\n  background-color: skyblue;\n"]);return A=function(){return n},n}function Y(){var n=(0,d.Z)(["\n  display: flex;\n  justify-content: space-between;\n  width: 1090px;\n"]);return Y=function(){return n},n}function $(){var n=(0,d.Z)(["\n  font-weight: bold;\n  font-size: 36px;\n  margin-top: 100px;\n  margin-bottom: 40px;\n"]);return $=function(){return n},n}function J(){var n=(0,d.Z)(["\n  width: 1200px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin-top: 80px;\n  margin-bottom: 80px;\n  padding-bottom: 50px;\n  box-shadow: 0px 4px 20px rgba(0, 0, 0, 0.2);\n"]);return J=function(){return n},n}function Q(){var n=(0,d.Z)(["\n  display: flex;\n  justify-content: space-evenly;\n"]);return Q=function(){return n},n}var G=p.Z.div(Q()),K=p.Z.div(J()),V=(p.Z.div($()),p.Z.div(Y()),p.Z.div(A()),p.Z.div(q())),X=p.Z.div(H()),nn=p.Z.div(F()),en=p.Z.div(B()),tn=p.Z.input(I()),rn=p.Z.div(W()),on=p.Z.button(N()),sn=p.Z.div(D()),un=p.Z.div(U()),an=p.Z.img(R()),cn=p.Z.div(T()),ln=p.Z.div(z()),dn=p.Z.div(E()),pn=p.Z.div(O()),fn=p.Z.div(_()),hn=p.Z.div(P()),xn=p.Z.img(M()),vn=p.Z.div(C()),gn=p.Z.div(L()),mn=p.Z.div(S()),bn=p.Z.img(k()),Zn=p.Z.div(j()),wn=p.Z.div(y()),yn=p.Z.div(w()),jn=p.Z.div(Z()),kn=p.Z.div(b()),Sn=p.Z.div(m());function Ln(){var n=(0,d.Z)(["\n  /* border: 1px solid #757575; */\n  display: flex;\n  width: 190px;\n  flex-direction: column;\n  align-items: center;\n  cursor: pointer;\n  margin-bottom: 10px;\n  :hover {\n    background-color: #ede7f6;\n    box-shadow: inset 2px 2px 2px 0px rgba(255, 255, 255, 0.5),\n      7px 7px 20px 0px rgba(0, 0, 0, 0.1), 4px 4px 5px 0px rgba(0, 0, 0, 0.1);\n    transition: all 0.3s ease;\n  }\n  :active {\n    top: 2px;\n    position: relative;\n  }\n"]);return Ln=function(){return n},n}function Cn(){var n=(0,d.Z)(["\n  color: #bdbdbd;\n  font-size: 10px;\n"]);return Cn=function(){return n},n}function Mn(){var n=(0,d.Z)(["\n  font-weight: bold;\n  font-size: 16px;\n"]);return Mn=function(){return n},n}function Pn(){var n=(0,d.Z)(["\n  font-size: 14px;\n"]);return Pn=function(){return n},n}function _n(){var n=(0,d.Z)(["\n  font-weight: 500;\n  font-size: 16px;\n"]);return _n=function(){return n},n}function On(){var n=(0,d.Z)(["\n  width: 120px;\n  height: 120px;\n  margin: 10px;\n"]);return On=function(){return n},n}function En(){var n=(0,d.Z)(["\n  display: flex;\n  flex-direction: column;\n\n  padding: 20px;\n"]);return En=function(){return n},n}function zn(){var n=(0,d.Z)(["\n  font-weight: bold;\n  font-size: 18px;\n  text-align: center;\n  padding-top: 20px;\n  padding-bottom: 10px;\n  margin-bottom: 10px;\n  border-bottom: 1px solid #bdbdbd;\n"]);return zn=function(){return n},n}function Tn(){var n=(0,d.Z)(["\n  width: 210px;\n  height: 855.33px;\n  margin-left: 20px;\n  margin-top: 80px;\n  border: 1px solid #bdbdbd;\n  box-shadow: 0px 4px 20px rgba(0, 0, 0, 0.2);\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  border: none;\n  top: 0px;\n  /* right: 3%; */\n  position: sticky;\n  background-color: white;\n  z-index: 10;\n  overflow: auto;\n  ::-webkit-scrollbar {\n    display: none;\n  }\n"]);return Tn=function(){return n},n}var Rn=p.Z.div(Tn()),Un=p.Z.div(zn()),Dn=p.Z.div(En()),Nn=p.Z.img(On()),Wn=p.Z.div(_n()),In=p.Z.div(Pn()),Bn=p.Z.div(Mn()),Fn=p.Z.div(Cn()),Hn=p.Z.div(Ln()),qn=function(n){var e;return(0,r.jsxs)(Rn,{children:[(0,r.jsx)(Un,{children:"\uc624\ub298 \ubcf8 \uc0c1\ud488"}),null===(e=n.basketData)||void 0===e?void 0:e.map((function(e){return(0,r.jsxs)(Hn,{children:[(0,r.jsx)(Nn,{src:"https://storage.googleapis.com/".concat(e.images[0]),onClick:n.onClickMove(e)}),(0,r.jsxs)(Dn,{children:[(0,r.jsx)(Wn,{children:e.name}),(0,r.jsx)(In,{children:e.remarks}),(0,r.jsxs)(Bn,{children:[e.price,"\uc6d0"]}),(0,r.jsx)(Fn,{children:e.tags})]})]},e._id)}))]})},An=function(){var n=(0,u.useState)([]),e=n[0],t=n[1],i=(0,s.useRouter)();(0,u.useEffect)((function(){var n=JSON.parse(localStorage.getItem("baskets"));t(n)}),[]);return(0,r.jsx)(qn,{basketData:e,onClickMove:function(n){return function(){i.push("/usedMarket/detail/".concat(n._id))}}})},Yn=t(22527);function $n(){var n=(0,d.Z)(["\n  query fetchUseditemsOfTheBest {\n    fetchUseditemsOfTheBest {\n      _id\n      name\n      remarks\n      price\n      tags\n      images\n      pickedCount\n    }\n  }\n"]);return $n=function(){return n},n}var Jn=(0,Yn.ZP)($n());function Qn(){var n=(0,d.Z)(["\n  display: flex;\n  justify-content: space-between;\n  /* flex-direction: column; */\n"]);return Qn=function(){return n},n}function Gn(){var n=(0,d.Z)(["\n  display: flex;\n  flex-direction: column;\n"]);return Gn=function(){return n},n}function Kn(){var n=(0,d.Z)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-end;\n  align-items: center;\n"]);return Kn=function(){return n},n}function Vn(){var n=(0,d.Z)([""]);return Vn=function(){return n},n}function Xn(){var n=(0,d.Z)([""]);return Xn=function(){return n},n}function ne(){var n=(0,d.Z)(["\n  display: flex;\n  flex-direction: column;\n  width: 250px;\n  background-color: #ffffff;\n  justify-content: flex-start;\n  padding: 20px;\n  box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.1);\n  /* box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.1);\n  box-shadow: inset 2px 2px 2px 0px rgba(255, 255, 255, 0.5),\n    7px 7px 20px 0px rgba(0, 0, 0, 0.1), 4px 4px 5px 0px rgba(0, 0, 0, 0.1);\n  transition: all 0.3s ease; */\n  :hover {\n    background-color: #ede7f6;\n    box-shadow: inset 2px 2px 2px 0px rgba(255, 255, 255, 0.5),\n      7px 7px 20px 0px rgba(0, 0, 0, 0.1), 4px 4px 5px 0px rgba(0, 0, 0, 0.1);\n    transition: all 0.3s ease;\n  }\n  /* background-color: black; */\n"]);return ne=function(){return n},n}function ee(){var n=(0,d.Z)(["\n  font-size: 18px;\n"]);return ee=function(){return n},n}function te(){var n=(0,d.Z)(["\n  font-size: 24px;\n  font-weight: bold;\n"]);return te=function(){return n},n}function re(){var n=(0,d.Z)(["\n  font-size: 20px;\n"]);return re=function(){return n},n}function ie(){var n=(0,d.Z)(["\n  font-size: 30px;\n  width: 180px;\n  display: inline-block;\n  white-space: nowrap;\n  overflow: hidden;\n"]);return ie=function(){return n},n}function oe(){var n=(0,d.Z)(["\n  width: 210px;\n  height: 210px;\n"]);return oe=function(){return n},n}function se(){var n=(0,d.Z)(["\n  display: flex;\n  justify-content: space-between;\n  width: 1050px;\n  cursor: pointer;\n"]);return se=function(){return n},n}function ue(){var n=(0,d.Z)(["\n  font-weight: bold;\n  font-size: 36px;\n  margin-top: 100px;\n  margin-bottom: 40px;\n"]);return ue=function(){return n},n}function ae(){var n=(0,d.Z)(["\n  width: 1200px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding-bottom: 50px;\n"]);return ae=function(){return n},n}var ce=p.Z.div(ae()),le=p.Z.div(ue()),de=p.Z.div(se()),pe=p.Z.img(oe()),fe=p.Z.div(ie()),he=p.Z.div(re()),xe=p.Z.div(te()),ve=p.Z.div(ee()),ge=p.Z.div(ne()),me=p.Z.img(Xn()),be=p.Z.div(Vn()),Ze=p.Z.div(Kn()),we=p.Z.div(Gn()),ye=p.Z.div(Qn()),je=function(n){var e;return(0,r.jsxs)(ce,{children:[(0,r.jsx)(le,{children:"\ubca0\uc2a4\ud2b8\uc0c1\ud488"}),(0,r.jsx)(de,{children:null===(e=n.data)||void 0===e?void 0:e.fetchUseditemsOfTheBest.map((function(e,t){return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(ge,{onClick:n.onClickMove(e._id),children:[(0,r.jsx)(pe,{src:"https://storage.googleapis.com/".concat(e.images[0])}),(0,r.jsxs)(ye,{children:[(0,r.jsxs)(we,{children:[(0,r.jsx)(fe,{children:e.name}),(0,r.jsx)(he,{children:e.remarks}),(0,r.jsxs)(xe,{children:[e.price,"\uc6d0"]}),(0,r.jsxs)(ve,{children:["#",e.tags]})]}),(0,r.jsxs)(Ze,{children:[(0,r.jsx)(me,{src:"/FreeBoard/heart.svg"}),(0,r.jsx)(be,{children:e.pickedCount})]})]})]},"".concat(e,"_").concat(t))})}))})]})},ke=function(){var n=(0,s.useRouter)(),e=(0,o.useQuery)(Jn,{variables:n.query.useditemId}).data;return(0,r.jsx)(je,{data:e,onClickMove:function(e){return function(){n.push("/usedMarket/detail/".concat(e))}}})},Se=t(246),Le=t.n(Se),Ce=function(n){var e,t;return(0,r.jsxs)(G,{children:[(0,r.jsxs)(K,{children:[(0,r.jsx)(ke,{}),(0,r.jsx)(V,{children:(0,r.jsxs)(X,{children:[(0,r.jsxs)(nn,{children:[(0,r.jsx)(en,{children:"\ud310\ub9e4\uc911\uc0c1\ud488"}),(0,r.jsx)(en,{children:"\ud310\ub9e4\ub41c\uc0c1\ud488"})]}),(0,r.jsxs)(sn,{children:[(0,r.jsx)(tn,{onChange:n.onChangeSearch}),(0,r.jsx)(rn,{children:(0,c._)(null===(e=n.data)||void 0===e?void 0:e.fetchUseditems.createdAt)}),(0,r.jsx)(on,{onClick:n.onClickSearch,children:"\uac80\uc0c9"})]})]})}),(0,r.jsx)("div",{style:{overflow:"auto",height:"1000px"},children:(0,r.jsx)(Le(),{pageStart:0,loadMore:n.onLoadMore,hasMore:n.hasMore,useWindow:!1,children:null===(t=n.data)||void 0===t?void 0:t.fetchUseditems.map((function(e){return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(wn,{onClick:n.onClickMoveDetail(e),children:[(0,r.jsxs)(un,{children:[(0,r.jsx)(an,{src:"https://storage.googleapis.com/".concat(e.images[0])}),(0,r.jsxs)(cn,{children:[(0,r.jsxs)(yn,{children:[(0,r.jsx)(ln,{children:e.name}),(0,r.jsxs)(jn,{children:[(0,r.jsx)(dn,{children:e.remarks}),(0,r.jsx)(pn,{children:e.tags})]})]}),(0,r.jsxs)(fn,{children:[(0,r.jsx)(xn,{src:"/FreeBoard/profileMain.png"}),(0,r.jsx)(hn,{children:e.seller.name}),(0,r.jsx)(xn,{src:"/FreeBoard/heart.svg"}),(0,r.jsx)(vn,{children:e.pickedCount})]})]})]}),(0,r.jsx)(gn,{children:(0,r.jsxs)(mn,{children:[(0,r.jsx)(bn,{src:"/FreeBoard/money.svg"}),(0,r.jsx)(Zn,{children:e.price})]})})]},e._id)})}))})}),(0,r.jsx)("form",{onSubmit:n.handleSubmit(n.onClickMove),children:(0,r.jsx)(l.Z,{buttonName:"\uc0c1\ud488 \ub4f1\ub85d\ud558\uae30"})})]}),(0,r.jsx)(kn,{children:(0,r.jsx)(An,{})}),(0,r.jsx)(Sn,{children:(0,r.jsx)(g,{})})]})};function Me(){var n=(0,d.Z)(["\n  query fetchUseditems($search: String, $page: Int) {\n    fetchUseditems(search: $search, page: $page) {\n      _id\n      name\n      remarks\n      contents\n      price\n      tags\n      images\n      createdAt\n      pickedCount\n      seller {\n        _id\n        name\n        email\n      }\n    }\n  }\n"]);return Me=function(){return n},n}var Pe=(0,Yn.ZP)(Me()),_e=function(){var n=(0,u.useState)(),e=n[0],t=n[1],c=(0,u.useState)(!0),l=c[0],d=c[1],p=(0,s.useRouter)(),f=(0,a.cI)(),h=f.register,x=f.handleSubmit,v=(0,o.useQuery)(Pe,{variables:p.query.useditemId}),g=v.data,m=v.refetch,b=v.fetchMore;return(0,r.jsx)(Ce,{onLoadMore:function(){g&&b({variables:{page:Math.floor((null===g||void 0===g?void 0:g.fetchUseditems.length)/10)+1},updateQuery:function(n,e){var t=e.fetchMoreResult;return t.fetchUseditems.length||d(!1),{fetchUseditems:[].concat((0,i.Z)(n.fetchUseditems),(0,i.Z)(t.fetchUseditems))}}})},onClickSearch:function(){m({search:e})},onChangeSearch:function(n){t(n.target.value)},handleSubmit:x,onClickMoveDetail:function(n){return function(){var e=[n],t=JSON.parse(localStorage.getItem("baskets")||"[]").filter((function(e){return e._id!==n._id}));localStorage.setItem("baskets",JSON.stringify(e.concat(t))),p.push("/usedMarket/detail/".concat(n._id))}},onClickMove:function(){p.push("/usedMarket/new")},register:h,hasMore:l,data:g})}},59999:function(n,e,t){"use strict";t.d(e,{Z:function(){return o}});var r=t(75093);var i=t(40355);function o(n){return function(n){if(Array.isArray(n))return(0,r.Z)(n)}(n)||function(n){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(n))return Array.from(n)}(n)||(0,i.Z)(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},57761:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function n(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=t(67294),o=u(i),s=u(t(45697));function u(n){return n&&n.__esModule?n:{default:n}}var a=function(n){function e(n){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?n:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return t.scrollListener=t.scrollListener.bind(t),t.eventListenerOptions=t.eventListenerOptions.bind(t),t.mousewheelListener=t.mousewheelListener.bind(t),t}return function(n,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}(e,n),r(e,[{key:"componentDidMount",value:function(){this.pageLoaded=this.props.pageStart,this.options=this.eventListenerOptions(),this.attachScrollListener()}},{key:"componentDidUpdate",value:function(){if(this.props.isReverse&&this.loadMore){var n=this.getParentElement(this.scrollComponent);n.scrollTop=n.scrollHeight-this.beforeScrollHeight+this.beforeScrollTop,this.loadMore=!1}this.attachScrollListener()}},{key:"componentWillUnmount",value:function(){this.detachScrollListener(),this.detachMousewheelListener()}},{key:"isPassiveSupported",value:function(){var n=!1,e={get passive(){n=!0}};try{document.addEventListener("test",null,e),document.removeEventListener("test",null,e)}catch(t){}return n}},{key:"eventListenerOptions",value:function(){var n=this.props.useCapture;return this.isPassiveSupported()&&(n={useCapture:this.props.useCapture,passive:!0}),n}},{key:"setDefaultLoader",value:function(n){this.defaultLoader=n}},{key:"detachMousewheelListener",value:function(){var n=window;!1===this.props.useWindow&&(n=this.scrollComponent.parentNode),n.removeEventListener("mousewheel",this.mousewheelListener,this.options?this.options:this.props.useCapture)}},{key:"detachScrollListener",value:function(){var n=window;!1===this.props.useWindow&&(n=this.getParentElement(this.scrollComponent)),n.removeEventListener("scroll",this.scrollListener,this.options?this.options:this.props.useCapture),n.removeEventListener("resize",this.scrollListener,this.options?this.options:this.props.useCapture)}},{key:"getParentElement",value:function(n){var e=this.props.getScrollParent&&this.props.getScrollParent();return null!=e?e:n&&n.parentNode}},{key:"filterProps",value:function(n){return n}},{key:"attachScrollListener",value:function(){var n=this.getParentElement(this.scrollComponent);if(this.props.hasMore&&n){var e=window;!1===this.props.useWindow&&(e=n),e.addEventListener("mousewheel",this.mousewheelListener,this.options?this.options:this.props.useCapture),e.addEventListener("scroll",this.scrollListener,this.options?this.options:this.props.useCapture),e.addEventListener("resize",this.scrollListener,this.options?this.options:this.props.useCapture),this.props.initialLoad&&this.scrollListener()}}},{key:"mousewheelListener",value:function(n){1!==n.deltaY||this.isPassiveSupported()||n.preventDefault()}},{key:"scrollListener",value:function(){var n=this.scrollComponent,e=window,t=this.getParentElement(n),r=void 0;if(this.props.useWindow){var i=document.documentElement||document.body.parentNode||document.body,o=void 0!==e.pageYOffset?e.pageYOffset:i.scrollTop;r=this.props.isReverse?o:this.calculateOffset(n,o)}else r=this.props.isReverse?t.scrollTop:n.scrollHeight-t.scrollTop-t.clientHeight;r<Number(this.props.threshold)&&n&&null!==n.offsetParent&&(this.detachScrollListener(),this.beforeScrollHeight=t.scrollHeight,this.beforeScrollTop=t.scrollTop,"function"===typeof this.props.loadMore&&(this.props.loadMore(this.pageLoaded+=1),this.loadMore=!0))}},{key:"calculateOffset",value:function(n,e){return n?this.calculateTopPosition(n)+(n.offsetHeight-e-window.innerHeight):0}},{key:"calculateTopPosition",value:function(n){return n?n.offsetTop+this.calculateTopPosition(n.offsetParent):0}},{key:"render",value:function(){var n=this,e=this.filterProps(this.props),t=e.children,r=e.element,i=e.hasMore,s=(e.initialLoad,e.isReverse),u=e.loader,a=(e.loadMore,e.pageStart,e.ref),c=(e.threshold,e.useCapture,e.useWindow,e.getScrollParent,function(n,e){var t={};for(var r in n)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r]);return t}(e,["children","element","hasMore","initialLoad","isReverse","loader","loadMore","pageStart","ref","threshold","useCapture","useWindow","getScrollParent"]));c.ref=function(e){n.scrollComponent=e,a&&a(e)};var l=[t];return i&&(u?s?l.unshift(u):l.push(u):this.defaultLoader&&(s?l.unshift(this.defaultLoader):l.push(this.defaultLoader))),o.default.createElement(r,c,l)}}]),e}(i.Component);a.propTypes={children:s.default.node.isRequired,element:s.default.node,hasMore:s.default.bool,initialLoad:s.default.bool,isReverse:s.default.bool,loader:s.default.node,loadMore:s.default.func.isRequired,pageStart:s.default.number,ref:s.default.func,getScrollParent:s.default.func,threshold:s.default.number,useCapture:s.default.bool,useWindow:s.default.bool},a.defaultProps={element:"div",hasMore:!1,initialLoad:!0,pageStart:0,ref:null,threshold:250,useWindow:!0,isReverse:!1,useCapture:!1,loader:null,getScrollParent:null},e.default=a,n.exports=e.default},246:function(n,e,t){n.exports=t(57761)}}]);